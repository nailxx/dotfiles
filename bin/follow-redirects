#!/usr/bin/env python3

import argparse

from urllib.request import urlopen

def follow(url):
    with urlopen(url) as conn:
        return conn.geturl()

def main():
    """
    Follows 3xx HTTP redirects of a given URL and outputs the final URL which
    did not redirected.
    """
    parser = argparse.ArgumentParser(description=main.__doc__)
    parser.add_argument('url', help='URL to request')
    args = parser.parse_args()
    url = follow(args.url)
    print(url)

if __name__ == '__main__':
    main()
